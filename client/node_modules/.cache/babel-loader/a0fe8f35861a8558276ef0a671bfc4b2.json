{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/environment/training/client/src/KeycloakLogin.js\";\nimport React, { Component } from 'react';\nimport Keycloak from \"keycloak-js\";\nimport decode from 'jwt-decode';\nimport JSONPretty from 'react-json-pretty';\nconst Config = {\n  url: 'https://3.251.70.242:8443',\n  realm: 'training',\n  clientId: 'react',\n  onLoad: 'login-required' //,\n  //scope: 'telefono'\n\n};\n\nclass KeycloakLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      keycloak: null,\n      authenticated: false\n    }; // ^ Contiene la respuesta que nos da Keycloak cuando nos logueamos (TOKEN)\n    // ^ Contiene información de la CONEXION a nuestro KEYCLOAK\n  } // DOM ???\n\n\n  componentDidMount() {\n    const keycloak = Keycloak(Config);\n    keycloak.init({\n      onLoad: 'login-required'\n    }).then(authenticated => {\n      this.setState({\n        keycloak: keycloak,\n        authenticated: authenticated\n      });\n      fetch(\"http://3.251.70.242:8086/test/admin\", {\n        headers: {\n          \"Authorization\": \"Bearer \" + keycloak.token\n        }\n      }).then(response => response.text()).then(text => console.log(text)).catch(error => console.log(error));\n      fetch(\"http://3.251.70.242:8086/test/user\", {\n        headers: {\n          \"Authorization\": \"Bearer \" + keycloak.token\n        }\n      }).then(response => response.text()).then(text => console.log(text)).catch(error => console.log(error));\n    });\n  }\n\n  render() {\n    if (this.state.keycloak && this.state.authenticated) {\n      var jwt = JSON.stringify(decode(this.state.keycloak.token));\n      return React.createElement(\"div\", {\n        style: {\n          \"marginLeft\": \"10%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(JSONPretty, {\n        id: \"json-pretty\",\n        data: jwt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          \"wordBreak\": \"break-all\",\n          \"width\": \"80%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.state.keycloak.token));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Waiting for KeyCloak login\");\n    }\n  }\n\n}\n\nexport default KeycloakLogin;","map":{"version":3,"sources":["/home/ubuntu/environment/training/client/src/KeycloakLogin.js"],"names":["React","Component","Keycloak","decode","JSONPretty","Config","url","realm","clientId","onLoad","KeycloakLogin","constructor","props","state","keycloak","authenticated","componentDidMount","init","then","setState","fetch","headers","token","response","text","console","log","catch","error","render","jwt","JSON","stringify"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAEA,MAAMC,MAAM,GAAG;AACXC,EAAAA,GAAG,EAAE,2BADM;AAEXC,EAAAA,KAAK,EAAE,UAFI;AAGXC,EAAAA,QAAQ,EAAE,OAHC;AAIXC,EAAAA,MAAM,EAAE,gBAJG,CAIc;AACzB;;AALW,CAAf;;AAQA,MAAMC,aAAN,SAA4BT,SAA5B,CAAsC;AAElCU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,aAAa,EAAE;AAAjC,KAAb,CAFe,CAGc;AACjB;AACf,GAPiC,CAQtC;;;AACIC,EAAAA,iBAAiB,GAAG;AAChB,UAAMF,QAAQ,GAAGZ,QAAQ,CAACG,MAAD,CAAzB;AACAS,IAAAA,QAAQ,CAACG,IAAT,CAAc;AAACR,MAAAA,MAAM,EAAE;AAAT,KAAd,EAA0CS,IAA1C,CAA+CH,aAAa,IAAI;AAC5D,WAAKI,QAAL,CAAc;AAAEL,QAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,QAAAA,aAAa,EAAEA;AAArC,OAAd;AAGAK,MAAAA,KAAK,CAAC,qCAAD,EAAwC;AAC7CC,QAAAA,OAAO,EAAE;AACP,2BAAiB,YAAUP,QAAQ,CAACQ;AAD7B;AADoC,OAAxC,CAAL,CAICJ,IAJD,CAIaK,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAJ1B,EAKCN,IALD,CAKOM,IAAD,IAAUC,OAAO,CAACC,GAAR,CAAYF,IAAZ,CALhB,EAMCG,KAND,CAMOC,KAAK,IAAIH,OAAO,CAACC,GAAR,CAAYE,KAAZ,CANhB;AAWAR,MAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC5CC,QAAAA,OAAO,EAAE;AACP,2BAAiB,YAAUP,QAAQ,CAACQ;AAD7B;AADmC,OAAvC,CAAL,CAICJ,IAJD,CAIOK,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAJpB,EAKCN,IALD,CAKOM,IAAD,IAAUC,OAAO,CAACC,GAAR,CAAYF,IAAZ,CALhB,EAMCG,KAND,CAMOC,KAAK,IAAIH,OAAO,CAACC,GAAR,CAAYE,KAAZ,CANhB;AAQH,KAvBD;AAyBH;;AAEDC,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKhB,KAAL,CAAWC,QAAX,IAAuB,KAAKD,KAAL,CAAWE,aAAtC,EAAsD;AAClD,UAAIe,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe7B,MAAM,CAAC,KAAKU,KAAL,CAAWC,QAAX,CAAoBQ,KAArB,CAArB,CAAV;AACA,aAAO;AAAM,QAAA,KAAK,EAAG;AAAC,wBAAc;AAAf,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,UAAD;AAAY,QAAA,EAAE,EAAC,aAAf;AAA6B,QAAA,IAAI,EAAEQ,GAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAFL,EAMK;AAAK,QAAA,KAAK,EAAG;AAAC,uBAAa,WAAd;AAA0B,mBAAS;AAAnC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKjB,KAAL,CAAWC,QAAX,CAAoBQ,KADzB,CANL,CAAP;AAWH,KAbD,MAaO;AACH,aAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP;AACH;AACJ;;AAvDiC;;AA2DtC,eAAeZ,aAAf","sourcesContent":["import React, { Component } from 'react'\nimport Keycloak from \"keycloak-js\"\nimport decode from 'jwt-decode'\nimport JSONPretty from 'react-json-pretty'\n\nconst Config = { \n    url: 'https://3.251.70.242:8443',\n    realm: 'training',\n    clientId: 'react',\n    onLoad: 'login-required' //,\n    //scope: 'telefono'\n}\n\nclass KeycloakLogin extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { keycloak: null, authenticated: false};\n                                     // ^ Contiene la respuesta que nos da Keycloak cuando nos logueamos (TOKEN)\n                    // ^ Contiene información de la CONEXION a nuestro KEYCLOAK\n    }\n// DOM ???\n    componentDidMount() {\n        const keycloak = Keycloak(Config);\n        keycloak.init({onLoad: 'login-required'}).then(authenticated => {\n            this.setState({ keycloak: keycloak, authenticated: authenticated })\n            \n            \n            fetch(\"http://3.251.70.242:8086/test/admin\", {\n            headers: {\n              \"Authorization\": \"Bearer \"+keycloak.token,\n            }})\n            .then(      (response) => response.text()        )\n            .then((text) => console.log(text))\n            .catch(error => console.log(error));\n            \n            \n            \n            \n            fetch(\"http://3.251.70.242:8086/test/user\", {\n            headers: {\n              \"Authorization\": \"Bearer \"+keycloak.token,\n            }})\n            .then((response) => response.text())\n            .then((text) => console.log(text))\n            .catch(error => console.log(error));\n            \n        });\n        \n    }\n\n    render() {\n        if (this.state.keycloak && this.state.authenticated ) {\n            var jwt = JSON.stringify(decode(this.state.keycloak.token));\n            return <div  style={ {\"marginLeft\": \"10%\"} }>\n                        \n                        <div>\n                            <JSONPretty id=\"json-pretty\" data={jwt}></JSONPretty>\n                        </div>\n                        \n                        <div style={ {\"wordBreak\": \"break-all\",\"width\": \"80%\"} }>\n                            {this.state.keycloak.token}\n                        </div>\n                        \n                    </div>\n        } else {\n            return <div>Waiting for KeyCloak login</div>\n        }\n    }\n\n}\n\nexport default KeycloakLogin\n"]},"metadata":{},"sourceType":"module"}